<div class="view">
    <Layout>
        <Sider collapsible
               :collapsed-width="40"
               v-model="isCollapsed"
               width="80"
               :style="{position: 'fixed', height: '100vh', left: 0, overflow: 'auto'}">
            <Menu :active-name="tab" theme="dark" width="auto" :class="menuItemClasses" @on-select="selectMenu">
                <MenuItem name="back">
                    <Icon type="reply"></Icon>
                </MenuItem>
                <MenuItem name="info">
                    <Icon type="fork-repo"></Icon>
                </MenuItem>
                <MenuItem name="build">
                    <Icon type="settings"></Icon>
                </MenuItem>
            </Menu>
        </Sider>
        <Layout :style="{marginLeft: isCollapsed ? '40px' : '80px'}">
            <Content class="view-content">
                <Card dis-hover>
                    <p slot="title">
                        <Icon type="folder"></Icon> {{repoName}} <!--({{repoDir}})-->
                    </p>
                    <a href="#" slot="extra" @click="refreshLogs" v-if="tab === 'info'">
                        <Icon type="ios-loop-strong"></Icon> Refresh
                    </a>
                </Card>
                <div class="info">
                    <div class="tool-bar">
                        <Input v-model="filterKey"
                               icon="compose"
                               placeholder="filter commits message..."
                               v-if="tab === 'info'"
                               style="width: 240px; float: right">
                        </Input>
                        <span class="build-select">
                            <Icon type="help" color="blue" size="18" title="将输出选择的两个版本号之间的增量包"></Icon>
                            <span>指定版本选择：</span>&nbsp;
                            <!--<a href="javascript:" :title="betweenVersion.fromMsg" :class="{'unset': !betweenVersion.fromHash}">{{betweenVersion.fromHash || 'unset'}}</a>-->
                            <!--&nbsp;-&nbsp;-->
                            <!--<a href="javascript:" :title="betweenVersion.toMsg" :class="{'unset': !betweenVersion.toHash}">{{betweenVersion.toHash || 'unset'}}</a>-->
                            <!--&nbsp;-->
                            <Tag type="dot" :color="betweenVersion.fromHash ? 'green' : 'red'" :title="betweenVersion.fromMsg">{{betweenVersion.fromHash || 'unset'}}</Tag>
                            ~
                            <Tag type="dot" :color="betweenVersion.toHash ? 'green' : 'red'" :title="betweenVersion.toMsg">{{betweenVersion.toHash || 'unset'}}</Tag>
                            <i-button icon="hammer" type="success" v-if="tab === 'build'" :disabled="!canBuild()" @click="build">Build</i-button>
                        </span>
                    </div>
                    <div class="history-wrap" v-if="tab === 'info'">
                        <Spin fix v-if="!logsReady">
                            <Icon type="load-c" size=18 class="spin-icon-load"></Icon>
                            <div>Loading</div>
                        </Spin>
                        <ul class="logs-list" v-if="logsReady">
                            <li v-for="log in displayLogs" v-show="log.message.indexOf(filterKey) > -1">
                                <Icon type="pull-request" class="commit-icon"></Icon>
                                <div>
                                    <strong>{{log.message}}</strong>&nbsp;
                                    <a href="javascript:" class="hash" :title="log.hash">{{log.hash.substr(0, 7)}}</a>
                                    <a href="javascript:" class="add-ash" @click="addLog(log)" title="add this hash to build param"><Icon type="wand"></Icon></a>
                                </div>
                                <div>{{log.date}} by {{log.author_name}}</div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="build" v-if="tab === 'build'">
                    <div class="task-row">
                        <Icon type="help" color="blue" size="18" title="快速构建应用的源码输出，用于安装程序的打包"></Icon>
                        <span>快速构建：</span>&nbsp;
                        <i-button icon="settings" type="success" @click="construct">Construct</i-button>
                    </div>
                    <div class="task-row">
                        <Icon type="help" color="blue" size="18" title="校验指定文件的 md5 sha1 输出"></Icon>
                        <span>MD5校验：</span>&nbsp;
                        <i-button icon="key" type="success" @click="md5">Hash file</i-button>
                    </div>
                    <div class="console-output">
                        <h3>输出：</h3>
                        <div class="output-box">
                        </div>
                    </div>
                </div>
            </Content>
        </Layout>
    </Layout>
</div>